{% extends "components/base.html" %}
{% load static %}


{% block title %}Products - Raveon{% endblock %}
{% block content %}

<div class="mx-auto max-w-7xl px-3 sm:px-4 lg:px-8 py-10">

  <!-- Header / Filters -->
  <div class="flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between mb-6">
    <div>
      <h1 class="text-3xl font-bold text-secondary dark:text-white">Products</h1>
      <p class="text-primary dark:text-gray-300">Explore our catalog for innovative solutions.</p>
    </div>

    <form method="get" class="flex flex-wrap items-center gap-2">
      <input name="q" value="{{ q }}" placeholder="Search products"
             class="w-56 rounded-md bg-white py-2 pl-3 pr-3 text-sm text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-[var(--color-primary)] dark:bg-white/5 dark:text-white dark:outline-white/10" />
      <select name="category"
        class="rounded-md bg-white py-2 pl-3 pr-8 text-sm text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:-outline-offset-2 focus:outline-[var(--color-primary)] dark:bg-white/5 dark:text-white dark:outline-white/10">
        <option value="">All categories</option>
        {% for c in categories %}
          <option value="{{ c.id }}" {% if c.id|stringformat:"s" == category %}selected{% endif %}>{{ c.name }}</option>

        {% endfor %}
      </select>
      <button class="rounded-md bg-[var(--color-primary)] px-3.5 py-2 text-sm font-semibold text-white">Filter</button>
      <a href="{% url 'products:list' %}" class="text-sm text-gray-600 dark:text-gray-300 underline">Reset</a>
    </form>
  </div>

  <!-- Product CTA -->
<div class="overflow-hidden bg-white py-24 sm:py-32 dark:bg-gray-900 mb-12">
  <div class="mx-auto max-w-7xl md:px-6 lg:px-8">
    <div class="grid grid-cols-1 gap-x-8 gap-y-16 sm:gap-y-20 lg:grid-cols-2 lg:items-start">
      <div class="px-6 md:px-0 lg:pt-4 lg:pr-4">
        <div class="mx-auto max-w-2xl lg:mx-0 lg:max-w-lg">
          <h2 class="text-base/7 font-semibold text-button dark:text-button">Dependable Quality</h2>
          <p class="mt-2 text-4xl font-semibold tracking-tight text-pretty text-gray-900 sm:text-5xl dark:text-white">Explore Our Products</p>
          <p class="mt-6 text-lg/8 text-gray-700 dark:text-gray-300">Raveon provides industry solutions you can depend on. Built and assembled in the United States, our data radios are designed for accuracy and performance.</p>
          <dl class="mt-10 max-w-xl space-y-8 text-base/7 text-gray-600 lg:max-w-none dark:text-gray-400">
            <div class="relative pl-9">
              <dt class="inline font-semibold text-gray-900 dark:text-white">
                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="absolute top-1 left-1 size-5 text-purple-500 dark:text-indigo-400">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z" />
                </svg>
                Guaranteed Compatibility.
              </dt>
              <dd class="inline">Once we commit to a project, we ensure that all components work seamlessly together, providing a reliable and efficient solution.</dd>
            </div>
            <div class="relative pl-9">
              <dt class="inline font-semibold text-gray-900 dark:text-white">
                <svg viewBox="0 0 20 20" fill="currentColor" data-slot="icon" aria-hidden="true" class="absolute top-1 left-1 size-5 text-purple-500 dark:text-indigo-400">
                  <path d="M10 1a4.5 4.5 0 0 0-4.5 4.5V9H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-.5V5.5A4.5 4.5 0 0 0 10 1Zm3 8V5.5a3 3 0 1 0-6 0V9h6Z" clip-rule="evenodd" fill-rule="evenodd" />
                </svg>
                Secure communications.
              </dt>
              <dd class="inline">Our products support secure communications to protect your data and privacy. Industry standards and compliance is a top priority for us.</dd>
            </div>
            <div class="relative pl-9">
              <dt class="inline font-semibold text-gray-900 dark:text-white">
                <svg viewBox="0 0 20 20" fill="currentColor" data-slot="icon" aria-hidden="true" class="absolute top-1 left-1 size-5 text-purple-500 dark:text-indigo-400">
                  <path d="M4.632 3.533A2 2 0 0 1 6.577 2h6.846a2 2 0 0 1 1.945 1.533l1.976 8.234A3.489 3.489 0 0 0 16 11.5H4c-.476 0-.93.095-1.344.267l1.976-8.234Z" />
                  <path d="M4 13a2 2 0 1 0 0 4h12a2 2 0 1 0 0-4H4Zm11.24 2a.75.75 0 0 1 .75-.75H16a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75h-.01a.75.75 0 0 1-.75-.75V15Zm-2.25-.75a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75H13a.75.75 0 0 0 .75-.75V15a.75.75 0 0 0-.75-.75h-.01Z" clip-rule="evenodd" fill-rule="evenodd" />
                </svg>
                In House Customization.
              </dt>
              <dd class="inline">Our engineers work closely with clients to develop tailored solutions that meet specific needs, in both the United States and abroad. You come to us or we will come to you. Either way, you get the best of the Raveon experience.</dd>
            </div>
          </dl>
        </div>
      </div>
      <div class="sm:px-6 lg:px-12 lg:pt-4 lg:mt-28">
        <div class="relative isolate overflow-hidden bg-linear-to-r from-[#2563EB] via-[#38BDF8] to-[#2DD4BF] px-6 pt-8 sm:mx-auto sm:max-w-2xl sm:rounded-3xl sm:pt-16 sm:pr-0 sm:pl-16 lg:mx-0 lg:max-w-none">
          <div aria-hidden="true" class="absolute -inset-y-px -left-3 -z-10 w-full origin-bottom-left skew-x-[-30deg] bg-indigo-100 opacity-20 ring-1 ring-white ring-inset"></div>
          <div class="mx-auto max-w-2xl sm:mx-0 sm:max-w-none">
            <div class="w-screen overflow-hidden rounded-tl-xl bg-primary ring-1 ring-white/10">
              <div class="flex bg-gray-800/40 ring-1 ring-white/5">
                <div class="-mb-px flex text-sm/6 font-medium text-gray-400">
                  <div class="border-r border-b border-r-white/10 border-b-white/20 bg-white/5 px-4 py-2 text-white">Compatibility Check</div>
                  <div class="border-r border-gray-600/10 px-4 py-2">Passed</div>
                </div>
              </div>
              <div class="px-6 pt-6 pb-14">
                <img src="{% static 'img/compatible_check.png' %}" alt="" class="h-56 w-56 object-cover transition group-hover:scale-105">
              </div>
            </div>
          </div>
          <div aria-hidden="true" class="pointer-events-none absolute inset-0 ring-1 ring-black/10 ring-inset sm:rounded-3xl dark:ring-white/10"></div>
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- Grid -->
  <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
    {% for p in products %}
      <a href="{% url 'products:detail' p.slug %}"
         class="group overflow-hidden rounded-xl bg-white ring-1 ring-black/5 shadow-sm hover:shadow-md transition dark:bg-gray-900 dark:ring-white/10">
        <div class="aspect-[4/3] bg-gray-50 dark:bg-gray-800">
          {% if p.image %}
           <img src="{{ p.image.url }}" alt="{{ p.name }}" class="h-full w-full object-cover transition group-hover:scale-105">
          {% else %}
          <div class="flex h-full w-full items-center justify-center text-gray-400">No Image</div>
           {% endif %}
        </div>
        <div class="p-4">
          <div class="flex items-center justify-between">
            <h2 class="text-base font-semibold text-gray-900 dark:text-white">{{ p.name }}</h2>

          </div>
          {% if p.short_description %}
            <p class="mt-1 text-sm text-gray-600 line-clamp-2 dark:text-gray-300">{{ p.short_description }}</p>
          {% endif %}
          {% if p.category %}
            <span class="mt-3 inline-flex items-center rounded-full bg-amber-700/10 px-2 py-0.5 text-xs font-medium text-amber-700 ring-1 ring-amber-700/30">
              {{ p.category }}
            </span>
          {% endif %}
        </div>
      </a>
    {% empty %}
      <p class="text-gray-600 dark:text-gray-300">No products found.</p>
    {% endfor %}
  </div>

  <!-- Pagination -->
  {% if products.paginator.num_pages > 1 %}
    <div class="mt-8 flex items-center justify-center gap-2">
      {% if products.has_previous %}
        <a class="rounded-md px-3 py-1 ring-1 ring-black/10 dark:ring-white/10" href="?page={{ products.previous_page_number }}&q={{ q }}&category={{ category }}">Prev</a>
      {% else %}
        <span class="rounded-md px-3 py-1 text-gray-400 ring-1 ring-black/10 dark:ring-white/10">Prev</span>
      {% endif %}
      <span class="px-2 text-sm text-gray-600 dark:text-gray-300">
        Page {{ products.number }} of {{ products.paginator.num_pages }}
      </span>
      {% if products.has_next %}
        <a class="rounded-md px-3 py-1 ring-1 ring-black/10 dark:ring-white/10" href="?page={{ products.next_page_number }}&q={{ q }}&category={{ category }}">Next</a>
      {% else %}
        <span class="rounded-md px-3 py-1 text-gray-400 ring-1 ring-black/10 dark:ring-white/10">Next</span>
      {% endif %}
    </div>
  {% endif %}

  <!-- Admin/owner actions (optional) -->
  <div class="mt-10">
    <a href="{% url 'products:create' %}" class="inline-flex items-center gap-2 rounded-md bg-amber-700 px-3.5 py-2.5 text-white">
      Add Product
      <svg viewBox="0 0 24 24" class="size-4" fill="none" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16M4 12h16"/>
      </svg>
    </a>
  </div>
</div>
{% endblock %}
